# Covid_19 data analysis

## Introduction

This R Markdown report delves into a detailed exploratory data analysis of the comprehensive dataset detailing COVID-19 related death counts, death rates, and percentages of total deaths. Spanning all 50 states, the District of Columbia, New York City (exclusive of New York State), and Puerto Rico, the data segments by jurisdiction of residence across various timeframes, including 3-month intervals, weekly, and cumulatively since January 1, 2020. By utilizing confirmed or presumed COVID-19 deaths coded to ICD-10 code U07.1, the report aims to uncover trends and patterns in COVID-19 fatalities over time and by location, employing visualizations like time series graphs and bar charts to compare death counts and rates across jurisdictions. This analysis seeks to provide a granular view of the pandemic's impact across different regions and periods, enhancing our understanding of its health implications.

## Prerequisites

List any prerequisites required to run the project, including software, libraries, and any setup configurations. For example:

- R and RStudio
- Required R packages: `dplyr`, `ggplot2`, `knitr`, `here`
- Make sure all R packages are installed using the following command in R:
    ```R
    install.packages(c("dplyr", "ggplot2", "knitr", "here"))
    ```
- Or run the following command:
    ```sh
    make install
    ```
   This command will execute the Makefile which restoring the package environment for the project

## Generating the Final Report in Docker

To build a local Docker image:
  In terminal, run command `docker build -t zhuohanchi/project_image .`
  Or
  In terminal, run `make project_image`
  
To generate the report by Docker:
  For Windows machine, in terminal, run command 
  `docker run -v /"$(pwd)/report":/project/report zhuohanchi/project_image`
  
  For Mac/Linux machine, in terminal, run command 
  `docker run -v "$(pwd)/report":/project/report zhuohanchi/project_image`
  
  Or 
  In terminal, run `make report/w_report.html` for Windows
  
  In terminal, run `make report/ml_report.html` for Mac or Linux
  
Link to image: https://hub.docker.com/repository/docker/zhuohanchi/project_image/general

## Generating the Final Report in R

To generate the final report, follow these steps:

1. Clone this repository to your local machine or download all the project files.
2. Open a terminal (or command prompt) and navigate to the project's root directory.
3. Run the following command:
    ```sh
    make report.html
    ```
   This command will execute the Makefile which orchestrates the creation of tables, figures, and the final report compilation.

### What's happening behind the scenes:

- **Tables:** The `table/ummary_by_jurisdiction_excluding_1_to_10.rds` and `table/rate_comparison_regions_1_to_10.rds` are generated by `code/01_make_table1.R` and `code/02_make_table2.R` respectively. These scripts process the data and create summary tables.
- **Figures:** The figures `figure/plot_1.png` and `figure/plot_2.png` are created by `code/03_make_plot1.R` and `code/04_make_plot2.R`. These scripts generate the visual representations of the data.
- **Final Report:** The `report.html` is compiled from `report.Rmd` using the script `code/02_render_report.R`, incorporating the generated tables and figures.

## Cleaning Up

To remove the generated files (tables, figures, and report) and clean the project directory, run:

```sh
make clean
```



  

